(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&o(d)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();const P="/dev_indra/hris-fe/";function H(...e){return e.filter(Boolean).map((t,n)=>n===0?t.replace(/\/+$/,""):t.replace(/^\/+|\/+$/g,"")).join("/")+"/"}async function I(e){const t=e.startsWith("http")?e:H(P,e).replace(/\/+$/,""),n=await fetch(t,{credentials:"same-origin"});if(!n.ok)throw new Error(`${n.status} ${n.statusText} for ${t}`);return n.text()}function M(e=""){return e.split(/[\s-]+/).filter(Boolean).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" ")}function S(){const e=(location.hash||"").replace(/^#\/?/,"").trim();return e||(location.pathname||"").replace(/^\/+|\/+$/g,"").trim()}function v(e){return e==="login"||e==="otp"}function y(e){const t=document.documentElement,n=document.body;t.classList.toggle("auth-mode",!!e),n.classList.toggle("login-page",!!e)}function O(){try{return JSON.parse(localStorage.getItem("auth")||"null")}catch{return null}}function $(e){localStorage.setItem("auth",JSON.stringify(e))}function D(){localStorage.removeItem("auth")}async function h(e,t){const n=document.getElementById(e);if(!n)return;const o=await I(t);n.innerHTML=o}function x(){const e=document.querySelector("#footer-container #fy");e&&(e.textContent=new Date().getFullYear());const t=document.querySelector("#footer-container #toTop");t&&t.addEventListener("click",n=>{n.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})})}let p=!1;async function A(){var e,t,n,o;p||(await h("header-container","components/header.html"),await h("sidebar-container","components/sidebar.html"),await h("breadcrumb-container","components/breadcrumb.html"),await h("footer-container","components/footer.html"),C(),b(),x(),p=!0,(e=document.getElementById("header-container"))==null||e.classList.remove("d-none"),(t=document.getElementById("sidebar-container"))==null||t.classList.remove("d-none"),(n=document.getElementById("breadcrumb-container"))==null||n.classList.remove("d-none"),(o=document.getElementById("footer-container"))==null||o.classList.remove("d-none"),y(!1))}function k(){p=!1,["header-container","sidebar-container","breadcrumb-container","footer-container"].forEach(e=>{const t=document.getElementById(e);t&&(t.innerHTML="",t.classList.add("d-none"))}),y(!0)}function N(e){const t=document.getElementById("breadcrumb-container");if(!t)return;if(v(e)){t.innerHTML="",t.classList.add("d-none");return}t.classList.remove("d-none");const n=e?M(e):"Home";t.innerHTML=`
    <nav aria-label="breadcrumb">
      <ol class="breadcrumb mb-3">
        <li class="breadcrumb-item"><a href="#/dashboard">Dashboard</a></li>
        <li class="breadcrumb-item active" aria-current="page">${n}</li>
      </ol>
    </nav>`}function U(e){var n;const t=`#/${e}`;(n=document.querySelectorAll(".nav .nav-link"))==null||n.forEach(o=>{o.classList.toggle("active",o.getAttribute("href")===t)})}function C(){const e=document.querySelector("#btnSidebar"),t=document.getElementById("sidebar-container");e&&t&&e.addEventListener("click",()=>t.classList.toggle("d-none"));const n=document.getElementById("btnTheme");n&&n.addEventListener("click",()=>{const o=document.documentElement;o.setAttribute("data-bs-theme",o.getAttribute("data-bs-theme")==="dark"?"light":"dark")}),document.querySelectorAll(".nav .nav-link").forEach(o=>{o.addEventListener("click",()=>{const r=document.getElementById("sidebar-container");window.innerWidth<992&&r&&r.classList.add("d-none")})})}function b(){var n;const e=document.getElementById("authArea");if(!e)return;const t=O();if(!t)e.innerHTML=`
      <div class="dropdown">
        <button class="btn btn-ghost btn-sm dropdown-toggle" data-bs-toggle="dropdown" aria-expanded="false">
          <i class="bi bi-box-arrow-in-right me-1"></i> Login
        </button>
        <div class="dropdown-menu dropdown-menu-end p-3" style="min-width: 260px;">
          <div class="d-grid">
            <a class="btn btn-primary btn-sm" id="btnLoginGo" href="#/login">
              <i class="bi bi-door-open me-1"></i> Buka Halaman Login
            </a>
          </div>
        </div>
      </div>`;else{const o=(t.name||"User").split(" ").map(r=>r[0]).slice(0,2).join("").toUpperCase();e.innerHTML=`
      <div class="dropdown">
        <button class="btn btn-ghost btn-sm d-flex align-items-center gap-2 dropdown-toggle" data-bs-toggle="dropdown">
          <span class="avatar-sm">${o}</span>
          <span class="d-none d-sm-inline">${t.name||"User"}</span>
        </button>
        <ul class="dropdown-menu dropdown-menu-end">
          <li><a class="dropdown-item" href="#/profile"><i class="bi bi-person-circle me-2"></i> Profil</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><button class="dropdown-item text-danger" id="btnLogout"><i class="bi bi-box-arrow-right me-2"></i> Keluar</button></li>
        </ul>
      </div>`}(n=document.getElementById("btnLogout"))==null||n.addEventListener("click",o=>{o.preventDefault(),D(),k(),b(),location.hash="#/login"})}async function B(e){const t=document.getElementById("page-container"),n=document.getElementById("auth-root");if(!t||!n)return;const o=e,r=v(o);r?(k(),t.innerHTML=""):(await A(),n.innerHTML="");const s=r?n:t,d=o&&o.length?o:"login",g=`pages/${d}.html`;try{const m=await I(g);s.innerHTML=m}catch(m){s.innerHTML=`<div class="container py-5 text-center">
      <h4 class="text-danger">Halaman tidak ditemukan: ${d}</h4>
      <div class="text-muted small">${String(m)}</div>
    </div>`}N(r?"login":d),U(d),j(s)}function j(e=document){var d,g,m,E,L;const t=e.querySelectorAll(".tab"),n=e.querySelectorAll(".tabpanel");t.length&&t.forEach(a=>{a.addEventListener("click",()=>{t.forEach(l=>l.classList.remove("active")),a.classList.add("active");const i=a.dataset.tab;n.forEach(l=>l.classList.toggle("hidden",l.id!==`tab-${i}`))})}),e.querySelectorAll("[data-open]").forEach(a=>{a.addEventListener("click",()=>{var l,c;const i=a.getAttribute("data-open");(c=(l=e.getElementById)==null?void 0:l.call(e,i))==null||c.classList.add("open")})}),e.querySelectorAll("[data-close]").forEach(a=>{a.addEventListener("click",()=>{var i;return(i=a.closest(".modal"))==null?void 0:i.classList.remove("open")})}),window.addEventListener("keydown",a=>{a.key==="Escape"&&document.querySelectorAll(".modal.open").forEach(i=>i.classList.remove("open"))}),e.querySelectorAll("[data-approve]").forEach(a=>a.addEventListener("click",()=>alert("Approved ✔"))),e.querySelectorAll("[data-reject]").forEach(a=>a.addEventListener("click",()=>alert("Rejected ✖")));const o=(d=e.getElementById)==null?void 0:d.call(e,"formLeaveRequest");o&&o.addEventListener("submit",a=>{a.preventDefault(),alert("Pengajuan berhasil dikirim (FE-only).")});const r=(g=e.getElementById)==null?void 0:g.call(e,"formLogin");if(r){const a=e.getElementById("loginPass"),i=e.getElementById("togglePass");i==null||i.addEventListener("click",()=>{const l=a.getAttribute("type")==="password"?"text":"password";a.setAttribute("type",l),i.innerHTML=l==="password"?'<i class="bi bi-eye"></i>':'<i class="bi bi-eye-slash"></i>'}),r.addEventListener("submit",l=>{var u,f;l.preventDefault();const c=((f=(u=e.getElementById("loginUser"))==null?void 0:u.value)==null?void 0:f.trim())||"User";localStorage.setItem("pending_user",JSON.stringify({name:c})),location.hash="#/otp"})}const s=(m=e.getElementById)==null?void 0:m.call(e,"formOTP");if(s){const a=[...e.querySelectorAll(".otp-input")];(E=a[0])==null||E.focus(),a.forEach((i,l)=>{i.addEventListener("input",()=>{i.value=i.value.replace(/\D/g,"").slice(0,1),i.value&&l<a.length-1&&a[l+1].focus()}),i.addEventListener("keydown",c=>{c.key==="Backspace"&&!i.value&&l>0&&a[l-1].focus()}),i.addEventListener("paste",c=>{var f,w;const u=(((f=c.clipboardData)==null?void 0:f.getData("text"))||"").replace(/\D/g,"").slice(0,6);u&&(c.preventDefault(),a.forEach((T,q)=>T.value=u[q]||""),(w=a[Math.min(u.length,a.length)-1])==null||w.focus())})}),s.addEventListener("submit",async i=>{if(i.preventDefault(),a.map(u=>u.value).join("")!=="123456"){alert("Kode OTP salah (gunakan 123456 untuk mock).");return}const c=JSON.parse(localStorage.getItem("pending_user")||"{}");c!=null&&c.name&&$({name:c.name}),localStorage.removeItem("pending_user"),await A(),b(),location.hash="#/dashboard"}),(L=e.getElementById("resendOTP"))==null||L.addEventListener("click",i=>{i.preventDefault(),alert("OTP baru telah dikirim (mock). Gunakan 123456.")})}[...e.querySelectorAll('[data-bs-toggle="tooltip"]')].forEach(a=>new bootstrap.Tooltip(a)),[...e.querySelectorAll('[data-bs-toggle="popover"]')].forEach(a=>new bootstrap.Popover(a))}window.addEventListener("DOMContentLoaded",async()=>{const e=S();y(v(e)),B(e)});window.addEventListener("storage",e=>{e.key==="auth"&&b()});window.addEventListener("hashchange",()=>{B(S())});
