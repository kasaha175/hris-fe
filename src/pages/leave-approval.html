<div class="container-fluid page-modern py-3">
  <!-- ====== KOTAK 1: Persetujuan Cuti (Manager LSP) ====== -->
  <div class="card card-glass mb-3">
    <div class="card-body">
      <div class="d-flex flex-wrap align-items-center justify-content-between gap-2 mb-3">
        <div class="d-flex align-items-center gap-2">
          <div class="head-blob"></div>
          <h5 class="mb-0 fw-bold">Persetujuan Cuti (Manager LSP)</h5>
        </div>
        <div class="d-flex gap-2 flex-wrap">
          <button class="btn btn-outline-success btn-sm" id="btnBulkApprove"><i class="bi bi-check2-square me-1"></i> Setujui Terpilih</button>
          <button class="btn btn-outline-danger btn-sm" id="btnBulkReject"><i class="bi bi-x-octagon me-1"></i> Tolak Terpilih</button>
        </div>
      </div>

      <!-- Bulk bar (muncul saat ada terpilih) -->
      <div class="bulk-bar d-none" id="bulkBar">
        <div><strong id="bulkCount">0</strong> pengajuan dipilih</div>
        <div class="d-flex gap-2">
          <button class="btn btn-success btn-sm"><i class="bi bi-check2"></i> Setujui</button>
          <button class="btn btn-danger btn-sm"><i class="bi bi-x"></i> Tolak</button>
          <button class="btn btn-outline-secondary btn-sm" id="bulkClear"><i class="bi bi-x-circle"></i> Bersihkan</button>
        </div>
      </div>

      <div class="table-responsive mt-2">
        <table class="table table-modern align-middle mb-0" id="tblLeaveApproval">
          <thead class="sticky-thead">
            <tr>
              <th style="width:42px"><input type="checkbox" class="form-check-input" id="checkAll"></th>
              <th>Tanggal</th>
              <th>Nama</th>
              <th>Divisi</th>
              <th>Jenis Cuti</th>
              <th>Periode</th>
              <th>Durasi</th>
              <th>Alasan</th>
              <th>Status</th>
              <th style="width:160px">Aksi</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-label="Pilih"><input type="checkbox" class="form-check-input row-check"></td>
              <td data-label="Tanggal">2025-10-03</td>
              <td data-label="Nama">Rahmat Hidayat</td>
              <td data-label="Divisi">IT Infrastructure</td>
              <td data-label="Jenis Cuti"><span class="badge lv-badge">Tahunan</span></td>
              <td data-label="Periode">10–12 Okt 2025</td>
              <td data-label="Durasi"><span class="count-pill">3</span> hr</td>
              <td data-label="Alasan">Acara keluarga</td>
              <td data-label="Status"><span class="badge st-badge st-wait">Menunggu</span></td>
              <td data-label="Aksi">
                <div class="btn-group btn-group-sm">
                  <button class="btn btn-outline-success" data-approve title="Setujui"><i class="bi bi-check2"></i></button>
                  <button class="btn btn-outline-danger" data-reject title="Tolak"><i class="bi bi-x"></i></button>
                  <button class="btn btn-outline-primary" title="Detail"><i class="bi bi-eye"></i></button>
                </div>
              </td>
            </tr>
            <tr>
              <td data-label="Pilih"><input type="checkbox" class="form-check-input row-check" disabled></td>
              <td data-label="Tanggal">2025-09-29</td>
              <td data-label="Nama">Siti Aisyah</td>
              <td data-label="Divisi">Human Capital</td>
              <td data-label="Jenis Cuti"><span class="badge lv-badge">Keagamaan</span></td>
              <td data-label="Periode">01–03 Okt 2025</td>
              <td data-label="Durasi"><span class="count-pill">3</span> hr</td>
              <td data-label="Alasan">Umroh</td>
              <td data-label="Status"><span class="badge st-badge st-approve">Disetujui</span></td>
              <td data-label="Aksi">
                <button class="btn btn-secondary btn-sm" disabled>Approved</button>
              </td>
            </tr>
            <!-- rows dinamis -->
          </tbody>
        </table>
      </div>
    </div>
  </div>

  <!-- ====== KOTAK 2: Riwayat Persetujuan ====== -->
  <div class="card card-glass">
    <div class="card-body">
      <div class="d-flex align-items-center gap-2 mb-3">
        <div class="head-blob"></div>
        <h5 class="mb-0 fw-bold">Riwayat Persetujuan</h5>
      </div>

      <div class="table-responsive">
        <table class="table table-modern align-middle mb-0" id="tblLeaveHistory">
          <thead class="sticky-thead">
            <tr>
              <th>Tanggal Pengajuan</th>
              <th>Nama</th>
              <th>Jenis</th>
              <th>Periode</th>
              <th>Durasi</th>
              <th>Keputusan</th>
              <th class="d-none d-lg-table-cell">Catatan</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td data-label="Tanggal Pengajuan">2025-09-12</td>
              <td data-label="Nama">Bagas Prakoso</td>
              <td data-label="Jenis">Tahunan</td>
              <td data-label="Periode">15–17 Sep 2025</td>
              <td data-label="Durasi"><span class="count-pill">3</span> hr</td>
              <td data-label="Keputusan"><span class="badge st-badge st-approve">Disetujui</span></td>
              <td data-label="Catatan" class="d-none d-lg-table-cell">Sudah diganti oleh staf lain</td>
            </tr>
            <tr>
              <td data-label="Tanggal Pengajuan">2025-09-10</td>
              <td data-label="Nama">Maria Yuliani</td>
              <td data-label="Jenis">Tahunan</td>
              <td data-label="Periode">12–13 Sep 2025</td>
              <td data-label="Durasi"><span class="count-pill">2</span> hr</td>
              <td data-label="Keputusan"><span class="badge st-badge st-reject">Ditolak</span></td>
              <td data-label="Catatan" class="d-none d-lg-table-cell">Belum cukup masa kerja</td>
            </tr>
            <!-- rows dinamis -->
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>

<style>
  :root{ --brand:#2DA85C; --brand-2:#6EE7B7; }
  html[data-bs-theme="light"]{
    --glass-bg: rgba(255,255,255,.86);
    --glass-bd: #E5EAF1;
    --muted:#667085;
    --hover: rgba(45,168,92,.06);
    --shadow: 0 18px 40px rgba(15,23,42,.10);
    --thead: #f8fafc;
  }
  html[data-bs-theme="dark"]{
    --glass-bg: rgba(13,17,23,.55);
    --glass-bd: rgba(255,255,255,.08);
    --muted:#9CA3AF;
    --hover: rgba(110,231,183,.08);
    --shadow: 0 18px 40px rgba(0,0,0,.45);
    --thead: rgba(255,255,255,.06);
  }

  /* Glassy cards */
  .card-glass{
    background: var(--glass-bg);
    border: 1px solid var(--glass-bd);
    box-shadow: var(--shadow);
    border-radius: 14px;
  }

  /* Header accent */
  .head-blob{
    width:28px;height:28px;border-radius:9px;flex:none;
    background:linear-gradient(135deg,var(--brand),var(--brand-2));
    box-shadow:0 6px 16px rgba(45,168,92,.35);
  }

  /* Bulk sticky bar */
  .bulk-bar{
    position: sticky; top: calc(var(--tb-h,64px) + 8px);
    z-index: 11; display:flex; align-items:center; justify-content:space-between;
    padding:.5rem .75rem; margin-bottom:.5rem;
    background: var(--glass-bg); border:1px solid var(--glass-bd); border-radius:12px; box-shadow: var(--shadow);
  }

  /* Table style */
  .table-modern thead th{
    background: var(--thead); border-bottom:1px solid var(--glass-bd);
  }
  .sticky-thead th{ position: sticky; top: 0; z-index: 1; }
  .table-modern tbody tr{ transition: background .12s ease; }
  .table-modern tbody tr:hover{ background: var(--hover); }
  .table-modern td, .table-modern th{ vertical-align: middle; }

  /* Pills & badges */
  .count-pill{
    display:inline-block; min-width:34px; padding:.1rem .5rem; text-align:center;
    border-radius:999px; border:1px solid var(--glass-bd); background:var(--glass-bg); font-weight:700;
  }
  .lv-badge{ background:color-mix(in oklab,var(--brand-2) 14%,transparent); color:#0f5132; font-weight:700; }
  .st-badge{ font-weight:700; }
  .st-wait{ background:color-mix(in oklab,#f59e0b 16%,transparent); color:#92400e; }
  .st-approve{ background:color-mix(in oklab,#22c55e 16%,transparent); color:#166534; }
  .st-reject{ background:color-mix(in oklab,#ef4444 16%,transparent); color:#991b1b; }

  /* Mobile: table -> cards */
  @media (max-width:768px){
    .table-responsive{ overflow:visible; }
    .table-modern thead{ display:none; }
    .table-modern tbody tr{
      display:block; margin-bottom:.75rem; border:1px solid var(--glass-bd);
      border-radius:12px; background:var(--glass-bg); box-shadow: var(--shadow);
      padding:.5rem .5rem;
    }
    .table-modern tbody td{
      display:flex; justify-content:space-between; gap:1rem;
      border:0 !important; padding:.35rem .25rem;
    }
    .table-modern tbody td::before{
      content: attr(data-label);
      font-weight:600; color: var(--muted);
    }
  }

  /* Print */
  @media print{
    .bulk-bar{ display:none !important; }
    .card-glass{ box-shadow:none; border:0; }
    .table-modern thead th{ position:static; }
  }
</style>

<script>
  // FE-only: bulk selection interaksi ringan
  (function(){
    const root = document.currentScript?.closest('.container') || document;
    const checkAll = root.querySelector('#checkAll');
    const rows = () => [...root.querySelectorAll('.row-check')];
    const bulkBar = root.querySelector('#bulkBar');
    const bulkCount = root.querySelector('#bulkCount');
    const bulkClear = root.querySelector('#bulkClear');

    function updateBulk(){
      const n = rows().filter(c => c.checked && !c.disabled).length;
      if (!bulkBar) return;
      bulkCount.textContent = n;
      bulkBar.classList.toggle('d-none', n === 0);
    }

    checkAll?.addEventListener('change', e => {
      rows().forEach(c => { if(!c.disabled) c.checked = e.target.checked; });
      updateBulk();
    });
    rows().forEach(c => c.addEventListener('change', updateBulk));
    bulkClear?.addEventListener('click', () => {
      if (checkAll) checkAll.checked = false;
      rows().forEach(c => { if(!c.disabled) c.checked = false; });
      updateBulk();
    });

    // Tombol approve/reject individual sudah ada di markup (data-approve / data-reject)
    // Tinggal sambungkan ke API kamu.
  })();
</script>
