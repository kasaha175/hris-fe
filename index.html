<!DOCTYPE html>
<html lang="id" data-bs-theme="light">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>HRIS Modern</title>

    <!-- Bootstrap 5.3 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
    

    <!-- ✅ Shell + Login toggles -->
    <style>
      :root{
        --brand:#2da85c; --brand-2:#6ee7b7;
      }
      html,body{height:100%}

      /* ===== App Shell (dashboard) ===== */
      #app-shell{display:block}
      body.login-page #app-shell{display:none}            /* sembunyikan shell saat login */

      /* ===== Auth Root (login) ===== */
      #auth-root{display:none}
      body.login-page #auth-root{display:block}

      /* Fullscreen no-scroll khusus login */
      body.login-page{
        overflow:hidden;                  /* hilangkan scroll di login */
        background:
          radial-gradient(1200px 600px at -10% -20%, rgba(45,168,92,.22), transparent 60%),
          radial-gradient(1000px 600px at 110% 120%, rgba(110,231,183,.18), transparent 60%),
          linear-gradient(180deg, #0b0f14, #0f1117);
      }
      body.login-page #auth-root{
        height:100vh; min-height:100vh;
        display:grid; place-items:center;
        padding:0; margin:0;
      }

      /* Opsional: kurangi lebar konten shell di layar besar */
      @media (min-width:1400px){
        main[role="main"]{ padding-right:3rem; padding-left:3rem; }
      }

      /* ===== THEME TOKENS (ikon/teks topbar) ===== */
      html[data-bs-theme="light"]{
        /* sudah ada sebelumnya… tambahkan ini: */
        --tb-fg:        #0F172A;   /* teks/ikon topbar */
        --icon-fg:      #1F2937;   /* warna ikon normal */
        --icon-fg-hover:#0B1220;   /* warna ikon saat hover */
        --search-icon:  #8A94A6;   /* ikon & placeholder di search */
      }

      html[data-bs-theme="dark"]{
        /* sudah ada sebelumnya… tambahkan ini: */
        --tb-fg:        #E6E8EC;
        --icon-fg:      #D1D5DB;
        --icon-fg-hover:#FFFFFF;
        --search-icon:  #9CA3AF;
      }

      /* ===== Terapkan token ke komponen ===== */
      .topbar-glass{
        color: var(--tb-fg); /* pastikan teks & ikon punya kontras */
      }

      /* Icon button (burger, tema, bell, dll.) */
      .icon-btn{
        color: var(--icon-fg);              /* <- ikon terlihat di light */
        border-color: var(--icon-bd);
      }
      .icon-btn:hover{ 
        background: var(--hover-bg);
        color: var(--icon-fg-hover);        /* <- lebih tegas saat hover */
      }
      .icon-btn:focus-visible{
        outline: none; box-shadow: 0 0 0 .18rem rgba(45,168,92,.18);
      }

      /* Ikon & placeholder pada kotak search */
      .top-search i{ color: var(--search-icon); }
      .top-search input::placeholder{ color: var(--search-icon); opacity:.9; }

      /* Notif dot: outline mengikuti background topbar agar selalu ‘terpotong’ rapi */
      .dot-badge{
        box-shadow: 0 0 0 2px var(--tb-bg);
      }

    </style>
  </head>

  <body class="d-flex flex-column min-vh-100">
    <!-- ===== Root untuk halaman Login (render dari main.js) ===== -->
    <div id="auth-root"></div>

    <!-- ===== App Shell untuk halaman selain login ===== -->
    <div id="app-shell" class="d-flex flex-column min-vh-100">
      <!-- Header -->
      <header id="header-container" class="border-bottom bg-body"></header>

      <!-- Layout -->
      <div class="container-fluid flex-grow-1">
        <div class="row">
          <!-- Sidebar -->
          <aside id="sidebar-container" class="col-12 col-md-3 col-lg-2 border-end p-0 bg-body-tertiary"></aside>

          <!-- Main content -->
          <main role="main" class="col-12 col-md-9 col-lg-10 p-3 p-md-4">
            <nav id="breadcrumb-container" class="mb-3"></nav>
            <div id="page-container"></div>
          </main>
        </div>
      </div>
      <div id="footer-container" class="mt-auto"></div>
    </div>

    

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Toggle helper: otomatis aktifkan mode login saat hash #/login -->
    <script>
      const applyLoginMode = () => {
        const isLogin = location.hash.startsWith('#/login') || location.pathname.endsWith('/login');
        document.body.classList.toggle('login-page', isLogin);
      };
      window.addEventListener('hashchange', applyLoginMode);
      window.addEventListener('DOMContentLoaded', applyLoginMode);
    </script>

    <!-- App -->
    <script type="module" src="src/main.js"></script>
  </body>
</html>
